{"remainingRequest":"/Users/bx/logistics-design/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bx/logistics-design/frontend/src/views/order/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/bx/logistics-design/frontend/src/views/order/list.vue","mtime":1747836068898},{"path":"/Users/bx/logistics-design/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1747185535160},{"path":"/Users/bx/logistics-design/frontend/node_modules/vue-loader/lib/index.js","mtime":1747185534034}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8vIGltcG9ydCB7IGdldE9yZGVyTGlzdCwgZGVsZXRlT3JkZXIgfSBmcm9tICdAL2FwaS9vcmRlcicKaW1wb3J0IHsgb3JkZXJBcGkgfSBmcm9tICdAL3V0aWxzL21vY2tVdGlscycKaW1wb3J0IHsgZ2V0Q29uc3RhbnRzIH0gZnJvbSAnQC91dGlscy9tb2NrVXRpbHMnCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdPcmRlckxpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2luYXRpb246ICgpID0+IGltcG9ydCgnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nKQogIH0sCiAgZmlsdGVyczogewogICAgbW9uZXkodmFsKSB7CiAgICAgIGlmICghdmFsKSByZXR1cm4gJzAuMDAnCiAgICAgIHJldHVybiBOdW1iZXIodmFsKS50b0ZpeGVkKDIpCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6KGo5qC85pWw5o2uCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIC8vIOWKoOi9veeKtuaAgQogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5oC75pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDmn6Xor6Llj4LmlbAKICAgICAgcXVlcnlQYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBvcmRlck5vOiAnJywKICAgICAgICBjdXN0b21lck5hbWU6ICcnLAogICAgICAgIHN0YXR1czogJycsCiAgICAgICAgZGF0ZVJhbmdlOiBbXQogICAgICB9LAogICAgICAvLyDnirbmgIHpgInpobkKICAgICAgc3RhdHVzT3B0aW9uczogZ2V0Q29uc3RhbnRzKCkub3JkZXJTdGF0dXMKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOafpeivouiuouWNleWIl+ihqCAqLwogICAgYXN5bmMgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IG9yZGVyQXBpLmxpc3QoewogICAgICAgICAgZmlsdGVyczogewogICAgICAgICAgICBvcmRlck5vOiB0aGlzLnF1ZXJ5UGFyYW1zLm9yZGVyTm8sCiAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogdGhpcy5xdWVyeVBhcmFtcy5jdXN0b21lck5hbWUsCiAgICAgICAgICAgIHN0YXR1czogdGhpcy5xdWVyeVBhcmFtcy5zdGF0dXMsCiAgICAgICAgICAgIGRhdGVSYW5nZTogdGhpcy5xdWVyeVBhcmFtcy5kYXRlUmFuZ2UKICAgICAgICAgIH0sCiAgICAgICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgICAgIHBhZ2VOdW06IHRoaXMucXVlcnlQYXJhbXMucGFnZU51bSwKICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucXVlcnlQYXJhbXMucGFnZVNpemUKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLnJlY29yZHMKICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W6K6i5Y2V5YiX6KGo5aSx6LSlOicsIGVycm9yKQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluiuouWNleWIl+ihqOWksei0pScpCiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgfQogICAgfSwKCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMQogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovCiAgICByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIG9yZGVyTm86ICcnLAogICAgICAgIGN1c3RvbWVyTmFtZTogJycsCiAgICAgICAgc3RhdHVzOiAnJywKICAgICAgICBkYXRlUmFuZ2U6IFtdCiAgICAgIH0KICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCgogICAgLyoqIOaWsOW7uuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlQWRkKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL29yZGVyL2NyZWF0ZScpCiAgICB9LAoKICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9vcmRlci9lZGl0LyR7cm93LmlkfWApCiAgICB9LAoKICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8KICAgIGFzeW5jIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCB0aGlzLiRjb25maXJtKCfnoa7orqTopoHliKDpmaTor6XorqLljZXlkJfvvJ8nLCAn5o+Q56S6JywgewogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSkKICAgICAgICBhd2FpdCBvcmRlckFwaS5kZWxldGUocm93LmlkKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGlmIChlcnJvciAhPT0gJ2NhbmNlbCcpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIoOmZpOiuouWNleWksei0pTonLCBlcnJvcikKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOiuouWNleWksei0pScpCiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKiDmn6XnnIvor6bmg4UgKi8KICAgIGhhbmRsZURldGFpbChyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9vcmRlci9kZXRhaWwvJHtyb3cuaWR9YCkKICAgIH0sCgogICAgLyoqIOavj+mhteaYvuekuuadoeaVsOaUueWPmCAqLwogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlU2l6ZSA9IHZhbAogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKCiAgICAvKiog5b2T5YmN6aG15pS55Y+YICovCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSB2YWwKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCgogICAgLy8g5qC85byP5YyW5pel5pyfCiAgICBmb3JtYXREYXRlVGltZShkYXRlKSB7CiAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykKICAgIH0sCgogICAgLy8g5qC85byP5YyW54q25oCBCiAgICBmb3JtYXRTdGF0dXMoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHN0YXR1c01hcCA9IHRoaXMuc3RhdHVzT3B0aW9ucy5yZWR1Y2UoKGFjYywgY3VycikgPT4gewogICAgICAgIGFjY1tjdXJyLnZhbHVlXSA9IGN1cnIubGFiZWwKICAgICAgICByZXR1cm4gYWNjCiAgICAgIH0sIHt9KQogICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c10gfHwgJ+acquefpScKICAgIH0sCgogICAgLy8g6I635Y+W54q25oCB5qCH562+57G75Z6LCiAgICBnZXRTdGF0dXNUeXBlKHN0YXR1cykgewogICAgICBjb25zdCB0eXBlTWFwID0gewogICAgICAgIDA6ICdpbmZvJywKICAgICAgICAxOiAnd2FybmluZycsCiAgICAgICAgMjogJ3ByaW1hcnknLAogICAgICAgIDM6ICdzdWNjZXNzJywKICAgICAgICA0OiAnc3VjY2VzcycKICAgICAgfQogICAgICByZXR1cm4gdHlwZU1hcFtzdGF0dXNdIHx8ICdpbmZvJwogICAgfSwKCiAgICAvKiog5a+85Ye65oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVFeHBvcnQoKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWvvOWHuuaJgOacieiuouWNleaVsOaNrj8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflr7zlh7rmiJDlip8nKQogICAgICAgIC8vIOWunumZhemhueebruS4reWPr+S7peWunueOsOaWh+S7tuS4i+i9veWKn+iDvQogICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AA+IA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/order","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card>\n      <div slot=\"header\">\n        <span>订单管理</span>\n      </div>\n      \n      <!-- 搜索区域 -->\n      <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\">\n        <el-form-item label=\"订单编号\" prop=\"orderNo\">\n          <el-input\n            v-model=\"queryParams.orderNo\"\n            placeholder=\"请输入订单编号\"\n            clearable\n            style=\"width: 200px\"\n            @keyup.enter.native=\"handleQuery\"\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"客户\" prop=\"customerName\">\n          <el-input\n            v-model=\"queryParams.customerName\"\n            placeholder=\"请输入客户名称\"\n            clearable\n            style=\"width: 200px\"\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"订单状态\" prop=\"status\">\n          <el-select\n            v-model=\"queryParams.status\"\n            placeholder=\"请选择订单状态\"\n            clearable\n            style=\"width: 200px\"\n          >\n            <el-option\n              v-for=\"(label, value) in statusOptions\"\n              :key=\"value\"\n              :label=\"label\"\n              :value=\"Number(value)\"\n            />\n          </el-select>\n        </el-form-item>\n        \n        <el-form-item label=\"日期范围\" prop=\"dateRange\">\n          <el-date-picker\n            v-model=\"queryParams.dateRange\"\n            type=\"daterange\"\n            range-separator=\"至\"\n            start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\"\n            style=\"width: 240px\"\n          />\n        </el-form-item>\n        \n        <el-form-item>\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">查询</el-button>\n          <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\n        </el-form-item>\n      </el-form>\n      \n      <!-- 操作按钮区域 -->\n      <el-row :gutter=\"10\" class=\"mb8\">\n        <el-col :span=\"1.5\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-plus\"\n            @click=\"handleAdd\"\n          >新增订单</el-button>\n        </el-col>\n        <el-col :span=\"1.5\">\n          <el-button\n            type=\"success\"\n            icon=\"el-icon-download\"\n            @click=\"handleExport\"\n          >导出</el-button>\n        </el-col>\n      </el-row>\n      \n      <!-- 表格区域 -->\n      <el-table\n        v-loading=\"loading\"\n        :data=\"tableData\"\n        border\n        style=\"width: 100%\"\n        @row-click=\"handleDetail\"\n      >\n        <el-table-column type=\"index\" label=\"序号\" width=\"50\" align=\"center\" />\n        <el-table-column prop=\"orderNo\" label=\"订单编号\" width=\"160\" />\n        <el-table-column prop=\"customerName\" label=\"客户名称\" min-width=\"180\" :show-overflow-tooltip=\"true\" />\n        <el-table-column prop=\"totalAmount\" label=\"订单金额\" width=\"100\">\n          <template slot-scope=\"scope\">\n            {{ scope.row.totalAmount | money }}\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"contactName\" label=\"联系人\" width=\"100\" />\n        <el-table-column prop=\"contactPhone\" label=\"联系电话\" width=\"120\" />\n        <el-table-column prop=\"status\" label=\"订单状态\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag :type=\"getStatusType(scope.row.status)\">{{ formatStatus(scope.row.status) }}</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"expectedDeliveryDate\" label=\"预计交付日期\" width=\"120\" />\n        <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160\" />\n        <el-table-column label=\"操作\" width=\"180\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              icon=\"el-icon-view\"\n              @click.stop=\"handleDetail(scope.row)\"\n            >查看</el-button>\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              icon=\"el-icon-edit\"\n              @click.stop=\"handleUpdate(scope.row)\"\n              v-if=\"scope.row.status === 0\"\n            >修改</el-button>\n            <el-button\n              size=\"mini\"\n              type=\"text\"\n              icon=\"el-icon-delete\"\n              @click.stop=\"handleDelete(scope.row)\"\n              v-if=\"scope.row.status === 0\"\n            >删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      \n      <!-- 分页区域 -->\n      <pagination\n        v-show=\"total > 0\"\n        :total=\"total\"\n        :page.sync=\"queryParams.pageNum\"\n        :limit.sync=\"queryParams.pageSize\"\n        @pagination=\"getList\"\n      />\n    </el-card>\n  </div>\n</template>\n\n<script>\n// import { getOrderList, deleteOrder } from '@/api/order'\nimport { orderApi } from '@/utils/mockUtils'\nimport { getConstants } from '@/utils/mockUtils'\nimport moment from 'moment'\n\nexport default {\n  name: 'OrderList',\n  components: {\n    Pagination: () => import('@/components/Pagination')\n  },\n  filters: {\n    money(val) {\n      if (!val) return '0.00'\n      return Number(val).toFixed(2)\n    }\n  },\n  data() {\n    return {\n      // 表格数据\n      tableData: [],\n      // 加载状态\n      loading: false,\n      // 总数\n      total: 0,\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 10,\n        orderNo: '',\n        customerName: '',\n        status: '',\n        dateRange: []\n      },\n      // 状态选项\n      statusOptions: getConstants().orderStatus\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    /** 查询订单列表 */\n    async getList() {\n      this.loading = true\n      try {\n        const res = await orderApi.list({\n          filters: {\n            orderNo: this.queryParams.orderNo,\n            customerName: this.queryParams.customerName,\n            status: this.queryParams.status,\n            dateRange: this.queryParams.dateRange\n          },\n          pagination: {\n            pageNum: this.queryParams.pageNum,\n            pageSize: this.queryParams.pageSize\n          }\n        })\n        this.tableData = res.records\n        this.total = res.total\n      } catch (error) {\n        console.error('获取订单列表失败:', error)\n        this.$message.error('获取订单列表失败')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.queryParams.pageNum = 1\n      this.getList()\n    },\n\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.queryParams = {\n        pageNum: 1,\n        pageSize: 10,\n        orderNo: '',\n        customerName: '',\n        status: '',\n        dateRange: []\n      }\n      this.getList()\n    },\n\n    /** 新建按钮操作 */\n    handleAdd() {\n      this.$router.push('/order/create')\n    },\n\n    /** 修改按钮操作 */\n    handleUpdate(row) {\n      this.$router.push(`/order/edit/${row.id}`)\n    },\n\n    /** 删除按钮操作 */\n    async handleDelete(row) {\n      try {\n        await this.$confirm('确认要删除该订单吗？', '提示', {\n          type: 'warning'\n        })\n        await orderApi.delete(row.id)\n        this.$message.success('删除成功')\n        this.getList()\n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('删除订单失败:', error)\n          this.$message.error('删除订单失败')\n        }\n      }\n    },\n\n    /** 查看详情 */\n    handleDetail(row) {\n      this.$router.push(`/order/detail/${row.id}`)\n    },\n\n    /** 每页显示条数改变 */\n    handleSizeChange(val) {\n      this.queryParams.pageSize = val\n      this.getList()\n    },\n\n    /** 当前页改变 */\n    handleCurrentChange(val) {\n      this.queryParams.pageNum = val\n      this.getList()\n    },\n\n    // 格式化日期\n    formatDateTime(date) {\n      return moment(date).format('YYYY-MM-DD HH:mm:ss')\n    },\n\n    // 格式化状态\n    formatStatus(status) {\n      const statusMap = this.statusOptions.reduce((acc, curr) => {\n        acc[curr.value] = curr.label\n        return acc\n      }, {})\n      return statusMap[status] || '未知'\n    },\n\n    // 获取状态标签类型\n    getStatusType(status) {\n      const typeMap = {\n        0: 'info',\n        1: 'warning',\n        2: 'primary',\n        3: 'success',\n        4: 'success'\n      }\n      return typeMap[status] || 'info'\n    },\n\n    /** 导出按钮操作 */\n    handleExport() {\n      this.$confirm('是否确认导出所有订单数据?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message.success('导出成功')\n        // 实际项目中可以实现文件下载功能\n      }).catch(() => {})\n    }\n  }\n}\n</script>\n\n<style scoped>\n.mb8 {\n  margin-bottom: 8px;\n}\n</style> "]}]}